{% extends 'base.html' %}

{% block content %}
{% load static %}
<head>
    <meta charset="UTF-8">

    <title>Create Game</title>
    
</head>


<script>
    var validateGameName = function () {

        var url = document.URL.split("create_game");

        $.post(url[0] + "find_duplicate_game/", {
            "name": document.getElementById("name").value
        }, function (response) {
            if (response.message.toUpperCase() !== "SUCCESS") {
                document.getElementById("errorMsg").innerHTML = response.message;
                document.getElementById("submitButton").style.display = "none";

            } else {
                document.getElementById("submitButton").style.display = "block";
                document.getElementById("errorMsg").innerHTML = "";

            }
        });
    }
</script>

<form action="/api/create_game/" method="post">
    {% csrf_token %}
    <div class="main-container">
        <div class="input-container">
            <div class="input-field">
                <input onfocusout="validateGameName()" type="text" id="name" name="name" autocomplete="off" required />
                <label for="name" class="label-name">Game Name :</label>
            </div>
            <div class="input-field">
                <input type="number" id="sample_size" min="1" name="sample_size" autocomplete="off" required />
                <label for="sample_size">Sample Size :</label>
            </div>
            <div class="input-field">
                <input type="number" id="pool_size" min="1" name="pool_size" autocomplete="off" required />
                <label for="pool_size">Pool Size :</label>
            </div>
            <div class="input-field">
                <input type="number" id="contestants" min="1" name="contestants" autocomplete="off" required />
                <label for="contestants">Contestants :</label>
            </div>
            <button id="submitButton" type="submit" value="Submit">Create</button>
            <div class="app-text" id="errorMsg" style="font-family: 'GraphiqueW01-Regular';font-size: 3rem;"></div>
        </div>
        <div class="input-container" style="margin-left: 500px;">
            <img src="{% static 'slick/oie_2212120tebkhWoO.gif' %}">
        </div>
    </div>
</form>

{% endblock %}